<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<title></title>
	<script src="../jquery-3.2.0.js"></script>
	<style>
		body{
			margin: 0;
			background-color: #666;
		}
		#box{
			width: 1200px;
			height: 700px;
			background: url(img/bg.png) no-repeat;
			position: relative;
			margin: 0px auto;
		}
		#box div{
			width: 400px;
			height: 100px;
			border-radius: 9px;
			position: absolute;
			left: 555px;
			top: 440px;
			transform-origin: 35px 50px;
			transition: 1s;
		}
		#box div:nth-of-type(1){
			background-color: #417191;
		}
		#box div:nth-of-type(2){
			background-color: #ce8298;
		}
		#box div:nth-of-type(3){
			background-color: #f78992;
		}
		#box div:nth-of-type(4){
			background-color: #fbc0a5;
		}
		#box div:nth-of-type(5){
			background-color: #f8988f;
		}
		#box div:nth-of-type(6){
			background-color: #f16273;
		}
		#box div:nth-of-type(7){
			background-color: #9c9fcd;
		}
		#box div:nth-of-type(8){
			background-color: #bae2d3;
		}
		#box div:nth-of-type(9){
			background-color: #43bab8;
		}
		#box div:nth-of-type(10){
			background-color: #678d95;
			/*transform: rotate(60deg);*/
		}
	</style>
</head>
<body>
	<div id="box">
		<div></div>
		<div></div>
		<div></div>
		<div></div>
		<div></div>
		<div></div>
		<div></div>
		<div></div>
		<div></div>
		<div></div>
	</div>
	<script>
		var box = $('#box');
		var tags = $('#box div'),
			lastTag = $('#box div:last');

		//展开
		function go(){
			tags.each(
				function(index,item){
					item.style.transform = `rotate( ${350 - index*17}deg )`
				}
			);
			box.flag = !box.flag;
		};

		//闭合
		function close(){		
			tags.each(
				function(index,item){
					item.style.transform = `rotate(0deg )`
				}
			);
			box.flag = !box.flag;			
		};

		//单个点击行为
		tags.each(
			function(index,item){
				$(item).on('click',function(){
					this.style.transform = `rotate(270deg)`;

					$(this).prevAll().each(
						function(index,item){
							item.style.transform = `rotate(${285 + (index + 1) * 15}deg )`
						}
					);

					$(this).nextAll().each(
						function(index,item){
							item.style.transform = `rotate(${260 - (index + 1) * 15}deg )`
						}
					);					
				});
			}
		);

		setTimeout(go,300);
		lastTag.on('click',function(){
			if(box.flag){
				close();
			}else{
				go();
			};		
		});
	</script>
</body>
</html>
